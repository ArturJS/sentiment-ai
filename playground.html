<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Sentiment-AI: Playground</title>
        <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <main class="md:container md:mx-auto">
            <h1 class="order-1 text-gray-900 text-3xl tracking-tight mt-2 mb-5">Sentiment-AI: Playground</h1>
            <textarea
                id="input_data"
                placeholder="Please, enter your text and click [Analyse]"
                class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none mb-2"
                rows="5"
            ></textarea>
            <button type="button" id="analyse"
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                Analyse
            </button>

            <div id="result">
            </div>
        </main>


        <script src="./dist/index.js" type="text/javascript"></script>

        <script>
            function useAutoHeight(element) {
                const computedStyle = getComputedStyle(element);
                const adjustHeight = () => {
                    requestAnimationFrame(() => {
                        element.style.height = 0;
                        const { scrollHeight } = element;
                        const { paddingTop, paddingBottom } = computedStyle;
                        const adjustedHeight = (
                            scrollHeight + parseInt(paddingTop) + parseInt(paddingBottom)
                        );
                        element.style.height = `${adjustedHeight}px`;
                    });
                };

                element.addEventListener('input', adjustHeight);
            }

            async function main() {
                const sentimentPredictor = await createSentimentPredictor();
                const button = document.getElementById('analyse');
                const textarea = document.getElementById('input_data');

                button.addEventListener('click', () => {
                    const text = textarea.value;
                    const result = sentimentPredictor.performMeasurement(text);

                    document.getElementById('result')
                        .textContent = `Result: ${(result * 100).toFixed(2)}`;
                });

                useAutoHeight(textarea);
            }

            main()
                .catch((error) => {
                    console.log(error);
                    alert(JSON.stringify({
                        message: error.message,
                        stack: error.stack
                    }, null, 2));
                })
        </script>
        <noscript>
            Please enable JavaScript to view the content.
        </noscript>
    </body>
</html>

